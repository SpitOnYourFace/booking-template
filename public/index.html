<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barbershop Halil - –ü–ª–æ–≤–¥–∏–≤</title>

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üíà</text></svg>">

    <!-- SEO Meta Tags -->
    <meta name="description" content="–ù–∞–π-–¥–æ–±—Ä–æ—Ç–æ –ø–æ–¥—Å—Ç—Ä–∏–≥–≤–∞–Ω–µ –∏ –æ—Ñ–æ—Ä–º—è–Ω–µ –Ω–∞ –±—Ä–∞–¥–∞ –≤ –ü–ª–æ–≤–¥–∏–≤. Barbershop Halil - –∫–ª–∞—Å–∏—á–µ—Å–∫–æ –±—Ä—ä—Å–Ω–µ–Ω–µ, –º–æ–¥–µ—Ä–Ω–æ –ø–æ–¥—Å—Ç—Ä–∏–≥–≤–∞–Ω–µ. –ó–∞–ø–∞–∑–∏ —á–∞—Å –æ–Ω–ª–∞–π–Ω!">
    <meta name="keywords" content="–±—Ä—ä—Å–Ω–∞—Ä–Ω–∏—Ü–∞, –ø–æ–¥—Å—Ç—Ä–∏–≥–≤–∞–Ω–µ, –ü–ª–æ–≤–¥–∏–≤, –±–∞—Ä–±–µ—Ä—à–æ–ø, –±—Ä–∞–¥–∞, –º—ä–∂–∫–æ –ø–æ–¥—Å—Ç—Ä–∏–≥–≤–∞–Ω–µ, –•–∞–ª–∏–ª">
    <meta name="author" content="Barbershop Halil">
    <meta name="robots" content="index, follow">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Barbershop Halil - –ù–∞–π-–¥–æ–±—Ä–æ—Ç–æ –ø–æ–¥—Å—Ç—Ä–∏–≥–≤–∞–Ω–µ –≤ –ü–ª–æ–≤–¥–∏–≤">
    <meta property="og:description" content="–ö–ª–∞—Å–∏—á–µ—Å–∫–æ –±—Ä—ä—Å–Ω–µ–Ω–µ, –º–æ–¥–µ—Ä–Ω–æ –ø–æ–¥—Å—Ç—Ä–∏–≥–≤–∞–Ω–µ –∏ –æ—Ñ–æ—Ä–º—è–Ω–µ –Ω–∞ –±—Ä–∞–¥–∞. –ó–∞–ø–∞–∑–∏ —á–∞—Å –æ–Ω–ª–∞–π–Ω —Å–µ–≥–∞!">
    <meta property="og:image" content="/bg.png">
    <meta property="og:url" content="https://halilbarber.com">
    <meta property="og:site_name" content="Barbershop Halil">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Barbershop Halil - –ü–ª–æ–≤–¥–∏–≤">
    <meta name="twitter:description" content="–ö–ª–∞—Å–∏—á–µ—Å–∫–æ –±—Ä—ä—Å–Ω–µ–Ω–µ –∏ –º–æ–¥–µ—Ä–Ω–æ –ø–æ–¥—Å—Ç—Ä–∏–≥–≤–∞–Ω–µ –≤ —Å—ä—Ä—Ü–µ—Ç–æ –Ω–∞ –ü–ª–æ–≤–¥–∏–≤.">

    <!-- Theme Color -->
    <meta name="theme-color" content="#d4af37">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Roboto:wght@300;400;700&display=swap" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Roboto:wght@300;400;700&display=swap"></noscript>

    <!-- Critical CSS first -->
    <link rel="stylesheet" href="style.css">

    <!-- Non-critical: Font Awesome + AOS (deferred) -->
    <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" as="style" href="https://unpkg.com/aos@2.3.1/dist/aos.css" onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
        <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
    </noscript>
</head>
<body>

    <!-- Navigation -->
    <header data-aos="fade-down">
        <div class="logo">HALIL BARBER</div>
        <div class="mobile-menu-btn" onclick="toggleMobileMenu()">
            <i class="fas fa-bars"></i>
        </div>
        <nav>
            <ul id="navLinks">
                <li><a href="#home" onclick="closeMobileMenu()">–ù–ê–ß–ê–õ–û</a></li>
                <li><a href="#services" onclick="closeMobileMenu()">–£–°–õ–£–ì–ò</a></li>
                <li><a href="#info" onclick="closeMobileMenu()">–ò–ù–§–û</a></li>
            </ul>
        </nav>
    </header>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <img src="bg.png" alt="Barbershop Halil Logo" class="hero-logo" data-aos="zoom-in">
        <h1 data-aos="zoom-in" data-aos-delay="200">–°—Ç–∏–ª—ä—Ç, –∫–æ–π—Ç–æ <span>–∑–∞—Å–ª—É–∂–∞–≤–∞—à</span></h1>
        <p data-aos="fade-up" data-aos-delay="400">–ö–ª–∞—Å–∏—á–µ—Å–∫–æ –±—Ä—ä—Å–Ω–µ–Ω–µ –∏ –º–æ–¥–µ—Ä–Ω–æ –ø–æ–¥—Å—Ç—Ä–∏–≥–≤–∞–Ω–µ –≤ —Å—ä—Ä—Ü–µ—Ç–æ –Ω–∞ –ü–ª–æ–≤–¥–∏–≤.</p>
        <a href="#services" class="btn" data-aos="fade-up" data-aos-delay="600">–ó–∞–ø–∞–∑–∏ –ß–∞—Å</a>
    </section>

    <!-- Services Section -->
    <section id="services" class="services">
        <div class="services-header" data-aos="fade-up">
            <span class="section-label"><i class="fas fa-cut"></i> –ö–∞–∫–≤–æ –ø—Ä–µ–¥–ª–∞–≥–∞–º–µ</span>
            <h2 class="section-title">–ù–∞—à–∏—Ç–µ –£—Å–ª—É–≥–∏</h2>
            <div class="title-decoration">
                <span class="line"></span>
                <span class="scissors">‚úÇ</span>
                <span class="line"></span>
            </div>
        </div>
        <div class="service-grid">
            <div class="service-card" data-aos="fade-up" onclick="selectService('–ú—ä–∂–∫–æ –ü–æ–¥—Å—Ç—Ä–∏–≥–≤–∞–Ω–µ', 25)">
                <div class="service-icon"><i class="fas fa-cut"></i></div>
                <h3>–ú—ä–∂–∫–æ –ü–æ–¥—Å—Ç—Ä–∏–≥–≤–∞–Ω–µ</h3>
                <p>–ö–ª–∞—Å–∏—á–µ—Å–∫–æ –∏–ª–∏ –º–æ–¥–µ—Ä–Ω–æ, —Å –≤–Ω–∏–º–∞–Ω–∏–µ –∫—ä–º –¥–µ—Ç–∞–π–ª–∞.</p>
                <div class="service-footer">
                    <span class="price">25 –ª–≤.</span>
                    <button class="book-btn">–ó–∞–ø–∞–∑–∏</button>
                </div>
            </div>
            <div class="service-card" data-aos="fade-up" data-aos-delay="100" onclick="selectService('–û—Ñ–æ—Ä–º—è–Ω–µ –Ω–∞ –ë—Ä–∞–¥–∞', 15)">
                <div class="service-icon"><i class="fas fa-user"></i></div>
                <h3>–û—Ñ–æ—Ä–º—è–Ω–µ –Ω–∞ –ë—Ä–∞–¥–∞</h3>
                <p>–ü–æ–¥—Å—Ç—Ä–∏–≥–≤–∞–Ω–µ, –∫–æ–Ω—Ç—É—Ä–∏—Ä–∞–Ω–µ –∏ —Ç–µ—Ä–∞–ø–∏—è —Å —Ç–æ–ø–ª–∏ –∫—ä—Ä–ø–∏.</p>
                <div class="service-footer">
                    <span class="price">15 –ª–≤.</span>
                    <button class="book-btn">–ó–∞–ø–∞–∑–∏</button>
                </div>
            </div>
            <div class="service-card featured" data-aos="fade-up" data-aos-delay="200" onclick="selectService('–ü—ä–ª–µ–Ω –ü–∞–∫–µ—Ç', 35)">
                <div class="featured-badge"><i class="fas fa-star"></i> –ü—Ä–µ–ø–æ—Ä—ä—á–∞–Ω–æ</div>
                <div class="service-icon"><i class="fas fa-crown"></i></div>
                <h3>–ü—ä–ª–µ–Ω –ü–∞–∫–µ—Ç</h3>
                <p>–ü–æ–¥—Å—Ç—Ä–∏–≥–≤–∞–Ω–µ + –ë—Ä–∞–¥–∞ + –ò–∑–º–∏–≤–∞–Ω–µ –∏ —Å—Ç–∞–π–ª–∏–Ω–≥.</p>
                <div class="service-footer">
                    <span class="price">35 –ª–≤.</span>
                    <button class="book-btn">–ó–∞–ø–∞–∑–∏</button>
                </div>
            </div>
            <div class="service-card" data-aos="fade-up" data-aos-delay="300" onclick="selectService('–î–µ—Ç—Å–∫–æ –ü–æ–¥—Å—Ç—Ä–∏–≥–≤–∞–Ω–µ', 20)">
                <div class="service-icon"><i class="fas fa-child"></i></div>
                <h3>–î–µ—Ç—Å–∫–æ –ü–æ–¥—Å—Ç—Ä–∏–≥–≤–∞–Ω–µ</h3>
                <p>–ó–∞ –º–∞–ª–∫–∏—Ç–µ –¥–∂–µ–Ω—Ç—ä–ª–º–µ–Ω–∏ (–¥–æ 12–≥).</p>
                <div class="service-footer">
                    <span class="price">20 –ª–≤.</span>
                    <button class="book-btn">–ó–∞–ø–∞–∑–∏</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Booking Modal -->
    <div id="bookingModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>–ó–∞–ø–∞–∑–∏ —á–∞—Å</h2>
            <p id="serviceTitle">–ò–∑–±—Ä–∞–Ω–∞ —É—Å–ª—É–≥–∞: <span id="selectedService"></span></p>

            <div class="booking-container">
                <div class="form-group">
                    <label>–ò–∑–±–µ—Ä–∏ –î–∞—Ç–∞:</label>
                    <div id="dateScroller" class="date-scroller">
                        <!-- Dates injected by JS -->
                    </div>
                    <input type="hidden" id="datePicker">
                </div>

                <div id="slotsGrid" class="slots-grid">
                    <p class="placeholder-text">–ò–∑–±–µ—Ä–∏ –¥–∞—Ç–∞ –æ—Ç–≥–æ—Ä–µ.</p>
                </div>

                <div id="clientDetails" style="display:none;">
                    <input type="text" id="clientName" placeholder="–¢–≤–æ–µ—Ç–æ –ò–º–µ" required>
                    <input type="tel" id="clientPhone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" required>
                    <small id="phoneError" style="color: #ff4444; display: none; margin-bottom: 10px;">–ù–µ–≤–∞–ª–∏–¥–µ–Ω —Ç–µ–ª–µ—Ñ–æ–Ω (–Ω–∞–ø—Ä. 0888123456)</small>
                    <div id="blockedMessage" style="display: none; background: rgba(255, 61, 113, 0.15); border: 1px solid rgba(255, 61, 113, 0.3); border-radius: 10px; padding: 15px; margin-bottom: 15px; text-align: center;">
                        <div style="font-size: 28px; margin-bottom: 8px;">üö´</div>
                        <p style="color: #FF5E82; font-weight: 600; margin: 0;">–ù–µ –º–æ–∂–µ—Ç–µ –¥–∞ –∑–∞–ø–∞–∑–∏—Ç–µ —á–∞—Å</p>
                    </div>
                    <input type="email" id="clientEmail" placeholder="Email (–Ω–µ–∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ)">
                    <small style="color: #888; display: block; margin-bottom: 15px; font-size: 12px;">–ó–∞ –ø–æ–ª—É—á–∞–≤–∞–Ω–µ –Ω–∞ –ø–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ –∏ –Ω–∞–ø–æ–º–Ω—è–Ω–µ</small>
                    <button class="btn" id="submitBtn" onclick="submitBooking()">
                        <span class="btn-text">–ò–∑–ø—Ä–∞—Ç–∏ –∑–∞—è–≤–∫–∞</span>
                        <span class="btn-loading" style="display: none;"><i class="fas fa-spinner fa-spin"></i> –ò–∑–ø—Ä–∞—â–∞–Ω–µ...</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal with Auto-Refresh Status -->
    <div id="successModal" class="modal">
        <div class="modal-content success-content">
            <!-- Pending State -->
            <div id="statusPending">
                <div class="status-icon pending-pulse">‚è≥</div>
                <h2>–ó–∞—è–≤–∫–∞—Ç–∞ –µ –∏–∑–ø—Ä–∞—Ç–µ–Ω–∞!</h2>
                <p>–û—á–∞–∫–≤–∞–º–µ –ø–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç –•–∞–ª–∏–ª...</p>
                <div class="confirmation-box">
                    <p>–í–∞—à–∏—è—Ç –∫–æ–¥:</p>
                    <div class="confirmation-code" id="confirmationCode">-</div>
                </div>
                <div class="auto-refresh-note">
                    <div class="spinner"></div>
                    <span>–ü—Ä–æ–≤–µ—Ä—è–≤–∞–º–µ —Å—Ç–∞—Ç—É—Å–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ...</span>
                </div>
                <p class="success-note">–ú–æ–∂–µ—Ç–µ –¥–∞ –∑–∞—Ç–≤–æ—Ä–∏—Ç–µ —Ç–∞–∑–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞. –©–µ –≤–∏ —É–≤–µ–¥–æ–º–∏–º!</p>
                <button class="btn btn-secondary" onclick="closeSuccess()">–ó–∞—Ç–≤–æ—Ä–∏</button>
            </div>

            <!-- Confirmed State -->
            <div id="statusConfirmed" style="display: none;">
                <div class="status-icon confirmed-bounce">‚úÖ</div>
                <h2>–ß–∞—Å—ä—Ç –µ –ü–û–¢–í–™–†–î–ï–ù!</h2>
                <div class="booking-details" id="bookingDetails"></div>
                <div class="confirmation-box success-box">
                    <p>–ö–æ–¥ –∑–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è:</p>
                    <div class="confirmation-code" id="confirmationCodeConfirmed">-</div>
                </div>
                <p class="success-note">–û—á–∞–∫–≤–∞–º–µ –≤–∏! üíà</p>
                <button class="btn" onclick="closeSuccess()">–°—Ç—Ä–∞—Ö–æ—Ç–Ω–æ!</button>
            </div>

            <!-- Rejected State -->
            <div id="statusRejected" style="display: none;">
                <div class="status-icon">‚ùå</div>
                <h2>–ß–∞—Å—ä—Ç –µ –æ—Ç–∫–∞–∑–∞–Ω</h2>
                <p>–ó–∞ —Å—ä–∂–∞–ª–µ–Ω–∏–µ —Ç–æ–∑–∏ —á–∞—Å –Ω–µ –µ –Ω–∞–ª–∏—á–µ–Ω.</p>
                <p>–ú–æ–ª—è, –∏–∑–±–µ—Ä–µ—Ç–µ –¥—Ä—É–≥ —á–∞—Å –∏–ª–∏ —Å–µ —Å–≤—ä—Ä–∂–µ—Ç–µ —Å –Ω–∞—Å.</p>
                <a href="tel:+359896109709" class="btn">üìû –û–±–∞–¥–∏ —Å–µ</a>
                <button class="btn btn-secondary" onclick="closeSuccess()">–ó–∞—Ç–≤–æ—Ä–∏</button>
            </div>
        </div>
    </div>

    <!-- Info Section -->
    <section id="info" class="info-section">
        <div class="info-container">
            <!-- Left Side - Big Info Card -->
            <div class="info-main" data-aos="fade-right">
                <div class="barber-pole"></div>
                <div class="info-main-content">
                    <h2>–ù–∞–º–µ—Ä–∏ –Ω–∏</h2>
                    <div class="location-display">
                        <i class="fas fa-map-marker-alt"></i>
                        <div>
                            <span class="district-name">–∫–≤. –ö–æ–º–∞—Ç–µ–≤–æ, –ü–ª–æ–≤–¥–∏–≤</span>
                            <span class="street-name">—É–ª. ‚Äû–ö–æ–º–∞—Ç–µ–≤—Å–∫–æ —à–æ—Å–µ" 278</span>
                        </div>
                    </div>
                    <div class="rating-display">
                        <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                        <span>5.0 –æ—Ç 53 –æ—Ç–∑–∏–≤–∞</span>
                    </div>
                    <a href="https://www.google.com/maps/search/?api=1&query=—É–ª.+–ö–æ–º–∞—Ç–µ–≤—Å–∫–æ+—à–æ—Å–µ+278,+–ü–ª–æ–≤–¥–∏–≤" target="_blank" class="directions-btn">
                        <i class="fas fa-directions"></i> –£–ø—ä—Ç–≤–∞–Ω–µ
                    </a>
                </div>
            </div>

            <!-- Right Side - Info Cards -->
            <div class="info-cards" data-aos="fade-left">
                <!-- Hours Card -->
                <div class="info-card">
                    <div class="info-card-icon"><i class="fas fa-clock"></i></div>
                    <div class="info-card-content">
                        <h4>–†–∞–±–æ—Ç–Ω–æ –≤—Ä–µ–º–µ</h4>
                        <div class="hours-list">
                            <div class="hour-row">
                                <span>–ü–æ–Ω - –ü–µ—Ç</span>
                                <span class="hour-time">10:00 - 19:00</span>
                            </div>
                            <div class="hour-row">
                                <span>–°—ä–±–æ—Ç–∞</span>
                                <span class="hour-time">10:00 - 14:00</span>
                            </div>
                            <div class="hour-row closed">
                                <span>–ù–µ–¥–µ–ª—è</span>
                                <span class="hour-time">–ó–∞—Ç–≤–æ—Ä–µ–Ω–æ</span>
                            </div>
                            <div class="hour-row break">
                                <span>–ü–æ—á–∏–≤–∫–∞</span>
                                <span class="hour-time">13:00 - 15:00</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Contact Card -->
                <div class="info-card">
                    <div class="info-card-icon"><i class="fas fa-phone-alt"></i></div>
                    <div class="info-card-content">
                        <h4>–ö–æ–Ω—Ç–∞–∫—Ç–∏</h4>
                        <a href="tel:+359896109709" class="contact-link">
                            <i class="fas fa-phone"></i> 089 610 9709
                        </a>
                    </div>
                </div>

                <!-- Social Card -->
                <div class="info-card">
                    <div class="info-card-icon"><i class="fas fa-share-alt"></i></div>
                    <div class="info-card-content">
                        <h4>–°–æ—Ü–∏–∞–ª–Ω–∏ –º—Ä–µ–∂–∏</h4>
                        <div class="social-links">
                            <a href="#" class="social-btn instagram"><i class="fab fa-instagram"></i></a>
                            <a href="#" class="social-btn facebook"><i class="fab fa-facebook-f"></i></a>
                            <a href="#" class="social-btn tiktok"><i class="fab fa-tiktok"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact CTA -->
    <section id="contact" class="contact">
        <h2 class="section-title">–ó–∞–ø–∞–∑–∏ —Å–≤–æ—è —á–∞—Å</h2>
        <p>–ù–µ —á–∞–∫–∞–π, –º–µ—Å—Ç–∞—Ç–∞ —Å–µ –∑–∞–ø—ä–ª–≤–∞—Ç –±—ä—Ä–∑–æ.</p>
        <a href="tel:+359896109709" class="btn"><i class="fas fa-phone"></i> 089 610 9709</a>
    </section>

    <footer>
        <p>&copy; 2026 Barbershop Halil. –í—Å–∏—á–∫–∏ –ø—Ä–∞–≤–∞ –∑–∞–ø–∞–∑–µ–Ω–∏.</p>
    </footer>

    <style>
        /* Status Icons */
        .status-icon {
            font-size: 64px;
            margin-bottom: 15px;
        }

        .pending-pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.1); }
        }

        .confirmed-bounce {
            animation: bounce 0.6s ease-out;
        }

        @keyframes bounce {
            0% { transform: scale(0); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        /* Auto-refresh indicator */
        .auto-refresh-note {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            color: #888;
            font-size: 14px;
            margin: 15px 0;
        }

        .spinner {
            width: 16px;
            height: 16px;
            border: 2px solid #333;
            border-top-color: #d4af37;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Booking details */
        .booking-details {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            text-align: left;
        }

        .booking-details .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .booking-details .detail-row:last-child {
            border-bottom: none;
        }

        .booking-details .label {
            color: #888;
        }

        .booking-details .value {
            color: #fff;
            font-weight: 600;
        }

        /* Success box variation */
        .success-box {
            border-color: #00D68F;
            background: rgba(0, 214, 143, 0.1);
        }

        /* Secondary button */
        .btn-secondary {
            background: transparent;
            border: 2px solid #d4af37;
            color: #d4af37;
            margin-top: 10px;
        }

        .btn-secondary:hover {
            background: rgba(212, 175, 55, 0.1);
        }

        /* Confirmation Code Box */
        .confirmation-box {
            background: rgba(212, 175, 55, 0.1);
            border: 2px dashed #d4af37;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .confirmation-box p {
            margin: 0 0 10px;
            color: #888;
            font-size: 14px;
        }

        .confirmation-box small {
            color: #666;
            font-size: 12px;
        }

        .confirmation-code {
            font-family: 'Courier New', monospace;
            font-size: 28px;
            font-weight: bold;
            color: #d4af37;
            letter-spacing: 3px;
            padding: 10px;
        }

        .success-note {
            color: #888;
            font-size: 14px;
            margin-top: 10px;
        }

        /* Button loading state */
        #submitBtn {
            position: relative;
            min-width: 180px;
        }

        #submitBtn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }
    </style>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js" defer></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof AOS !== 'undefined') {
                AOS.init({ duration: 800, once: true });
            } else {
                // AOS still loading, wait for it
                const waitAOS = setInterval(() => {
                    if (typeof AOS !== 'undefined') {
                        clearInterval(waitAOS);
                        AOS.init({ duration: 800, once: true });
                    }
                }, 50);
                setTimeout(() => clearInterval(waitAOS), 5000);
            }
        });

        // Service prices map (matching server-side)
        const SERVICE_PRICES = {
            '–ú—ä–∂–∫–æ –ü–æ–¥—Å—Ç—Ä–∏–≥–≤–∞–Ω–µ': 25,
            '–û—Ñ–æ—Ä–º—è–Ω–µ –Ω–∞ –ë—Ä–∞–¥–∞': 15,
            '–ü—ä–ª–µ–Ω –ü–∞–∫–µ—Ç': 35,
            '–î–µ—Ç—Å–∫–æ –ü–æ–¥—Å—Ç—Ä–∏–≥–≤–∞–Ω–µ': 20
        };

        // Toast Notification Function
        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.innerText = message;
            document.body.appendChild(toast);

            setTimeout(() => { toast.classList.add('show'); }, 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => document.body.removeChild(toast), 300);
            }, 3000);
        }

        // Mobile Menu Logic
        function toggleMobileMenu() {
            const nav = document.getElementById('navLinks');
            nav.classList.toggle('active');
        }

        function closeMobileMenu() {
            document.getElementById('navLinks').classList.remove('active');
        }

        const modal = document.getElementById("bookingModal");
        let currentService = "";
        let currentPrice = 0;
        let selectedTime = null;

        function selectService(name, price) {
            currentService = name;
            currentPrice = price;
            document.getElementById("selectedService").innerText = name + " (" + price + " –ª–≤.)";
            modal.style.display = "block";

            const today = new Date().toISOString().split('T')[0];
            document.getElementById("datePicker").value = today;

            generateDates();
        }

        function generateDates() {
            const scroller = document.getElementById("dateScroller");
            scroller.innerHTML = "";
            const days = ['–ù–µ–¥', '–ü–æ–Ω', '–í—Ç–æ', '–°—Ä—è', '–ß–µ—Ç', '–ü–µ—Ç', '–°—ä–±'];
            const months = ['–Ø–Ω—É', '–§–µ–≤', '–ú–∞—Ä', '–ê–ø—Ä', '–ú–∞–π', '–Æ–Ω–∏', '–Æ–ª–∏', '–ê–≤–≥', '–°–µ–ø', '–û–∫—Ç', '–ù–æ–µ', '–î–µ–∫'];

            for(let i=0; i<14; i++) {
                const d = new Date();
                d.setDate(d.getDate() + i);
                const isoDate = d.toISOString().split('T')[0];
                const dayName = i === 0 ? "–î–Ω–µ—Å" : i === 1 ? "–£—Ç—Ä–µ" : days[d.getDay()];
                const monthName = months[d.getMonth()];

                const card = document.createElement("div");
                card.className = "date-card";
                if(i===0) card.classList.add("active");
                card.onclick = () => selectDate(card, isoDate);

                card.innerHTML = `
                    <span class="day-name">${dayName}</span>
                    <span class="day-number">${d.getDate()}</span>
                    <span class="month-name">${monthName}</span>
                `;

                scroller.appendChild(card);

                if(i===0) {
                    document.getElementById("datePicker").value = isoDate;
                    loadSlots();
                }
            }
        }

        function selectDate(el, date) {
            document.querySelectorAll(".date-card").forEach(c => c.classList.remove("active"));
            el.classList.add("active");
            document.getElementById("datePicker").value = date;
            loadSlots();
        }

        function closeModal() {
            modal.style.display = "none";
            document.getElementById("clientDetails").style.display = "none";
            document.getElementById("clientName").value = "";
            document.getElementById("clientPhone").value = "";
            document.getElementById("clientEmail").value = "";
            document.getElementById("clientEmail").style.display = "";
            document.getElementById("clientEmail").nextElementSibling.style.display = "";
            document.getElementById("blockedMessage").style.display = "none";
            document.getElementById("submitBtn").style.display = "";
            selectedTime = null;
        }

        let statusCheckTimeout = null;
        let currentBookingCode = null;
        let pollCount = 0;
        const POLL_INTERVALS = [3, 5, 5, 10, 10, 15, 15, 30]; // seconds

        function closeSuccess() {
            document.getElementById("successModal").style.display = "none";
            if (statusCheckTimeout) {
                clearTimeout(statusCheckTimeout);
                statusCheckTimeout = null;
            }
            pollCount = 0;
            document.getElementById("statusPending").style.display = "block";
            document.getElementById("statusConfirmed").style.display = "none";
            document.getElementById("statusRejected").style.display = "none";
        }

        function showBookingStatus(code, bookingData) {
            currentBookingCode = code;
            document.getElementById("confirmationCode").innerText = code;
            document.getElementById("successModal").style.display = "block";
            pollCount = 0;
            startStatusPolling(code, bookingData);
        }

        function startStatusPolling(code, bookingData) {
            checkStatus(code, bookingData);
        }

        function scheduleNextPoll(code, bookingData) {
            const interval = POLL_INTERVALS[Math.min(pollCount, POLL_INTERVALS.length - 1)] * 1000;
            pollCount++;
            statusCheckTimeout = setTimeout(() => {
                if (document.hidden) {
                    // Page not visible, wait until it is
                    const onVisible = () => {
                        document.removeEventListener('visibilitychange', onVisible);
                        checkStatus(code, bookingData);
                    };
                    document.addEventListener('visibilitychange', onVisible);
                } else {
                    checkStatus(code, bookingData);
                }
            }, interval);
        }

        async function checkStatus(code, bookingData) {
            try {
                const res = await fetch(`/api/status/${code}?t=${Date.now()}`, {
                    cache: 'no-store'
                });
                if (!res.ok) { scheduleNextPoll(code, bookingData); return; }

                const data = await res.json();

                if (data.status === 'confirmed') {
                    document.getElementById("statusPending").style.display = "none";
                    document.getElementById("statusConfirmed").style.display = "block";
                    document.getElementById("confirmationCodeConfirmed").innerText = code;
                    document.getElementById("bookingDetails").innerHTML = `
                        <div class="detail-row">
                            <span class="label">üìÖ –î–∞—Ç–∞</span>
                            <span class="value">${formatDateBg(data.date)}</span>
                        </div>
                        <div class="detail-row">
                            <span class="label">‚è∞ –ß–∞—Å</span>
                            <span class="value">${data.time}</span>
                        </div>
                        <div class="detail-row">
                            <span class="label">‚úÇÔ∏è –£—Å–ª—É–≥–∞</span>
                            <span class="value">${data.service}</span>
                        </div>
                    `;
                } else if (data.status === 'rejected') {
                    document.getElementById("statusPending").style.display = "none";
                    document.getElementById("statusRejected").style.display = "block";
                } else {
                    // Still pending, continue polling
                    scheduleNextPoll(code, bookingData);
                }
            } catch (e) {
                console.error('Status check failed:', e);
                scheduleNextPoll(code, bookingData);
            }
        }

        function formatDateBg(dateStr) {
            const date = new Date(dateStr);
            const days = ['–ù–µ–¥–µ–ª—è', '–ü–æ–Ω–µ–¥–µ–ª–Ω–∏–∫', '–í—Ç–æ—Ä–Ω–∏–∫', '–°—Ä—è–¥–∞', '–ß–µ—Ç–≤—ä—Ä—Ç—ä–∫', '–ü–µ—Ç—ä–∫', '–°—ä–±–æ—Ç–∞'];
            const months = ['—è–Ω—É–∞—Ä–∏', '—Ñ–µ–≤—Ä—É–∞—Ä–∏', '–º–∞—Ä—Ç', '–∞–ø—Ä–∏–ª', '–º–∞–π', '—é–Ω–∏',
                            '—é–ª–∏', '–∞–≤–≥—É—Å—Ç', '—Å–µ–ø—Ç–µ–º–≤—Ä–∏', '–æ–∫—Ç–æ–º–≤—Ä–∏', '–Ω–æ–µ–º–≤—Ä–∏', '–¥–µ–∫–µ–º–≤—Ä–∏'];
            return `${days[date.getDay()]}, ${date.getDate()} ${months[date.getMonth()]}`;
        }

        async function loadSlots() {
            const date = document.getElementById("datePicker").value;
            if (!date) return;

            const grid = document.getElementById("slotsGrid");
            grid.innerHTML = "<p>–ó–∞—Ä–µ–∂–¥–∞–Ω–µ...</p>";

            try {
                const res = await fetch(`/api/slots?date=${date}`);
                const slots = await res.json();

                grid.innerHTML = "";

                // Check if selected date is today
                const today = new Date();
                const todayStr = today.toISOString().split('T')[0];
                const isToday = date === todayStr;
                const currentHour = today.getHours();
                const currentMinute = today.getMinutes();

                // Filter out past slots if today
                const availableSlots = slots.filter(slot => {
                    if (!isToday) return true;
                    const [slotHour, slotMinute] = slot.time.split(':').map(Number);
                    // Hide slot if its time has passed
                    if (slotHour < currentHour) return false;
                    if (slotHour === currentHour && slotMinute <= currentMinute) return false;
                    return true;
                });

                if(availableSlots.length === 0) {
                    grid.innerHTML = "<p>–ù—è–º–∞ —Å–≤–æ–±–æ–¥–Ω–∏ —á–∞—Å–æ–≤–µ –∑–∞ —Ç–∞–∑–∏ –¥–∞—Ç–∞.</p>";
                    return;
                }

                availableSlots.forEach(slot => {
                    const div = document.createElement("div");

                    if (slot.status === 'free') {
                        div.className = "time-slot free";
                        div.innerText = slot.time;
                        div.onclick = () => selectTime(div, slot.time);
                        grid.appendChild(div);
                    } else {
                        div.className = "time-slot taken";
                        div.innerText = slot.time;
                        div.title = slot.status === 'confirmed' ? "–ó–∞–µ—Ç" : "–ò–∑—á–∞–∫–≤–∞";
                        grid.appendChild(div);
                    }
                });
            } catch (e) {
                console.error(e);
                grid.innerHTML = "<p>–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –≤—Ä—ä–∑–∫–∞ —Å—ä—Å —Å—ä—Ä–≤—ä—Ä–∞.</p>";
            }
        }

        function selectTime(el, time) {
            document.querySelectorAll('.time-slot.selected').forEach(d => d.classList.remove('selected'));
            el.classList.add('selected');
            selectedTime = time;
            document.getElementById("clientDetails").style.display = "block";
        }

        function validateInput(id, regex) {
            const el = document.getElementById(id);
            const valid = regex ? regex.test(el.value) : el.value.trim().length > 0;

            el.style.borderColor = valid ? "#555" : "red";
            if(id === "clientPhone") {
                document.getElementById("phoneError").style.display = valid ? "none" : "block";
            }
            return valid;
        }

        async function submitBooking() {
            const nameValid = validateInput("clientName");
            const phoneValid = validateInput("clientPhone", /^(\+359|0)8[7-9][0-9]{7}$/);

            if (!nameValid || !phoneValid || !selectedTime) {
                if(!selectedTime) alert("–ú–æ–ª—è –∏–∑–±–µ—Ä–µ—Ç–µ —á–∞—Å!");
                return;
            }

            const name = document.getElementById("clientName").value;
            const phone = document.getElementById("clientPhone").value;
            const email = document.getElementById("clientEmail").value.trim();
            const date = document.getElementById("datePicker").value;
            const btn = document.getElementById('submitBtn');

            // Show loading state
            btn.disabled = true;
            btn.querySelector('.btn-text').style.display = 'none';
            btn.querySelector('.btn-loading').style.display = 'inline';

            try {
                // Get price from our map (not from string matching)
                const price = SERVICE_PRICES[currentService] || currentPrice;

                const res = await fetch('/api/book', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        date,
                        time: selectedTime,
                        service: currentService,
                        price: price,
                        clientName: name,
                        clientPhone: phone,
                        clientEmail: email || null
                    })
                });

                const data = await res.json();

                if (res.ok) {
                    closeModal();
                    // Show status modal with auto-refresh
                    showBookingStatus(data.confirmationCode, {
                        date: date,
                        time: selectedTime,
                        service: currentService
                    });
                } else if (data.error === 'blocked') {
                    document.getElementById('blockedMessage').style.display = 'block';
                    document.getElementById('submitBtn').style.display = 'none';
                    document.getElementById('clientEmail').style.display = 'none';
                    document.getElementById('clientEmail').nextElementSibling.style.display = 'none';
                } else {
                    alert("–ì—Ä–µ—à–∫–∞: " + (data.error || "–í—ä–∑–Ω–∏–∫–Ω–∞ –ø—Ä–æ–±–ª–µ–º."));
                    loadSlots();
                }

            } catch (e) {
                alert("–°—ä—Ä–≤—ä—Ä–Ω–∞ –≥—Ä–µ—à–∫–∞");
            }

            // Reset button state
            btn.disabled = false;
            btn.querySelector('.btn-text').style.display = 'inline';
            btn.querySelector('.btn-loading').style.display = 'none';
        }

        window.onclick = function(event) {
            if (event.target == modal) {
                closeModal();
            }
        }

        // Scroll spy for navigation highlighting
        const sections = document.querySelectorAll('section[id]');
        const navLinks = document.querySelectorAll('nav a');

        function highlightNav() {
            const scrollY = window.scrollY;

            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                const sectionHeight = section.offsetHeight;
                const sectionId = section.getAttribute('id');

                if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href') === '#' + sectionId) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        }

        window.addEventListener('scroll', highlightNav);
        highlightNav();
    </script>
</body>
</html>
